$(document).ready(function() {
  $(document).on('click', '#slider input', function(){
    if(this.checked){
      $('#address-form').hide(200);
    }else{
      $('#address-form').show(200);
    }
  })
});



$(document).ready(function(){
  var checkbox = $('#slider input');
  var street = $('#address-form #checkout_address_attributes_street');
  var house = $('#checkout_address_attributes_house');
  street.prop('required', true)
  house.prop('required', true)
  $('#checkout_receiver_attributes_name').prop('required', true);
  $('#checkout_receiver_attributes_phone').prop('required', true);
  $('#checkout_sender_attributes_name').prop('required', true);
  $('#checkout_sender_attributes_phone').prop('required', true);
  $('#datepicker').prop('required', true);

  $(document).on('click', '#slider input', function(){
    if (this.checked){
      street.prop('required', false)
      house.prop('required', false)
    }else{
      street.prop('required', true)
      house.prop('required', true)
    }
  });

})


$(document).ready(function() {
  $(document).on('click', '#slider_call input', function(){
    if(this.checked){
      $('#info').show();
    }else{
      $('#info').hide();
    }
  })
});

$(document).on('click', 'input#checkout_delivery_self', function(){
  $(this).closest('label').tab('show');
  $('#address-form #checkout_address_attributes_street').prop('required', false);;
  $('#checkout_address_attributes_house').prop('required', false);
  $('#checkout_receiver_attributes_name').prop('required', false);
  $('#checkout_receiver_attributes_phone').prop('required', false);
});

$(document).on('click', 'input#checkout_delivery_send', function(){
  $(this).closest('label').tab('show');
  $('#address-form #checkout_address_attributes_street').prop('required', true);
  $('#checkout_address_attributes_house').prop('required', true);
  $('#checkout_receiver_attributes_name').prop('required', true);
  $('#checkout_receiver_attributes_phone').prop('required', true);
});

$(document).on('click', '#next', function(){
  var inputs = $('form#new_checkout :input[required]')
  var emptyFields = []
  $(inputs).each(function(i, elem){
    if($(elem).val() == ""){
      emptyFields.push(elem)
    }else{
      $(inputs).each(function(i, field){
        $(field).addClass('is-valid');
      })
    }
  })
  if (emptyFields.length){
    $(emptyFields).each(function(i, field){
      $(field).addClass('is-invalid');
    })
  }else{
    $(inputs).each(function(i, field){
      $(field).removeClass('is-invalid').closest('.form-group').removeClass('has-danger')
    })
    $('#options').removeClass('disabled').tab('show');
  }
})

$(document).on('keyup, click', function(){
  var inputs = $('form#new_checkout :input')
  $(inputs).each(function(i, elem){
    if($(elem).val() != ""){
      $(elem).addClass('is-valid').closest('.form-group').addClass('has-success');
      $(elem).removeClass('is-invalid').closest('.form-group').removeClass('has-danger');
    }
  })
})
